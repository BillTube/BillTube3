
:root{
  --btfw-top: 48px;
  --btfw-bg: #0f1115;
  --btfw-bg-soft: #17181b;
  --btfw-border: rgba(255,255,255,.06);
  --btfw-text: #e7e7ea;
  --btfw-muted: #a9abb5;
  --btfw-surface: rgba(20,20,26,.85);
  --btfw-surface-2: rgba(28,30,36,.85);
}
#btfw-grid{ display:grid; grid-template-columns:minmax(600px, var(--btfw-leftpx, 1fr)) 6px minmax(320px, 1fr); gap:0; margin-top: calc(var(--btfw-top) + 6px); }
#btfw-vsplit{ cursor: col-resize; background: rgba(255,255,255,.06); position:relative; z-index:2; }
#btfw-vsplit::after{ content:""; position:absolute; inset:0; border-left:2px solid rgba(255,255,255,.18); pointer-events:none; }
#btfw-chatcol{ position: sticky; top: var(--btfw-top); height: calc(100vh - var(--btfw-top) - 8px); display:flex; flex-direction:column; min-width:320px; }
@supports (height: 100dvh){ #btfw-chatcol{ height: calc(100dvh - var(--btfw-top) - 8px); } }
#chatwrap.btfw-chatwrap{ display:flex; flex-direction:column; width:100% !important; max-width:100% !important; height:100%; }
#messagebuffer.btfw-messagebuffer{ flex:1 1 auto; overflow:auto; width:100%; min-height:0; }
.btfw-chat-topbar,.btfw-chat-bottombar{ display:flex; align-items:center; justify-content:space-between; padding:8px 10px; border-radius:10px; background:var(--btfw-surface); margin-bottom:8px; border:1px solid var(--btfw-border); color:var(--btfw-text); }
.btfw-chat-title{ font-weight:700; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }
.btfw-chat-actions{ display:flex; gap:8px; }
.btfw-controls-row{ margin-top:8px; width:100%; position: sticky; bottom: max(0px, env(safe-area-inset-bottom)); background: var(--btfw-bg-soft); border-top: 1px solid var(--btfw-border); padding-bottom: max(8px, env(safe-area-inset-bottom)); z-index: 1; }
.btfw-chat-avatar{ width:28px; height:28px; border-radius:6px; margin-right:6px; vertical-align:middle; border:1px solid var(--btfw-border); }
#userlist.btfw-userlist-overlay{ position:absolute; right:12px; top:60px; bottom:140px; width:300px; background:rgba(18,18,22,.95); border-radius:12px; overflow:auto; box-shadow:0 10px 30px rgba(0,0,0,.45); display:none; z-index:50; color:#e7e7ea; }
#userlist.btfw-userlist-overlay.btfw-userlist-overlay--open{ display:block; }
#chatwrap #userlist:not(.btfw-userlist-overlay){ display:none !important; }
.btfw-stack { margin-top: 10px; }
.btfw-stack-header{ display:flex; align-items:center; justify-content:space-between; padding:8px 10px; margin-bottom:8px; border:1px solid var(--btfw-border); border-radius:10px; background:var(--btfw-surface); color:var(--btfw-text); }
.btfw-stack-title{ font-weight:700; }
.btfw-stack-list{ display:flex; flex-direction:column; gap:10px; }
.btfw-stack-item{ border:1px solid var(--btfw-border); border-radius:12px; background:var(--btfw-bg-soft); }
.btfw-stack-item__header{ display:flex; gap:10px; align-items:center; justify-content:space-between; padding:8px 10px; border-bottom:1px solid var(--btfw-border); }
.btfw-stack-arrows{ display:flex; gap:6px; }
.btfw-arrow{ border:1px solid var(--btfw-border); background:transparent; color:var(--btfw-text); border-radius:8px; padding:4px 8px; cursor:pointer; }
.btfw-arrow:hover{ background:var(--btfw-surface-2); }
.btfw-stack-item__body{ padding: 8px; }
.btfw-channels .btfw-channels-bar{ display:flex; align-items:center; gap:8px; padding:8px; }
.btfw-ch-scroller{ overflow:auto; white-space:nowrap; display:flex; gap:8px; scroll-behavior:smooth; }
.btfw-ch{ display:inline-flex; align-items:center; gap:8px; padding:8px 12px; border-radius:8px; border:1px solid var(--btfw-border); background:var(--btfw-surface); color:var(--btfw-text); text-decoration:none; }
.btfw-ch:hover{ background:var(--btfw-surface-2); }
.btfw-ch-nav{ border:1px solid var(--btfw-border); background:transparent; color:var(--btfw-text); border-radius:8px; padding:6px 10px; }
.btfw-video-overlay{ position:absolute; inset:0; pointer-events:none; }
.btfw-video-overlay .btfw-vo-right{ position:absolute; top:8px; right:8px; display:flex; gap:6px; pointer-events:auto; }
.btfw-vo-btn{ border:1px solid var(--btfw-border); border-radius:8px; background:var(--btfw-surface); color:var(--btfw-text); padding:6px 10px; cursor:pointer; }
.btfw-vo-btn:hover{ background:var(--btfw-surface-2); }
#videowrap{ position:relative; }
#btfw-leftpad [class*="col-"], #btfw-leftpad .row, #btfw-leftpad .container, #btfw-leftpad .container-fluid{ width:100% !important; max-width:100% !important; float:none !important; }
#videowrap, #playlistrow, #playlistwrap, #queuecontainer, #queue, #plmeta{ width:100% !important; max-width:100% !important; float:none !important; display:block !important; }
@media (max-width: 900px){
  #btfw-grid{ grid-template-columns: 1fr; }
  #btfw-vsplit{ display:none; }
  #btfw-chatcol{ position: sticky; top: var(--btfw-top); height: calc(100dvh - var(--btfw-top) - 6px); }
}
