
html,body{ background: radial-gradient(1200px 600px at 10% -20%, rgba(124,108,255,.08), transparent), radial-gradient(900px 600px at 110% 20%, rgba(95,138,255,.06), transparent), var(--btfw-bg); color: var(--btfw-text); }
#btfw-grid{ display:grid; grid-template-columns:minmax(600px, var(--btfw-leftpx, 1fr)) 6px minmax(320px, 1fr); gap:0; margin-top: calc(var(--btfw-top) + 6px); }
#btfw-vsplit{ cursor: col-resize; background: rgba(255,255,255,.06); position:relative; z-index:2; }
#btfw-chatcol{ position: sticky; top: var(--btfw-top); height: calc(100vh - var(--btfw-top) - 8px); display:flex; flex-direction:column; min-width:320px; }
@supports (height: 100dvh){ #btfw-chatcol{ height: calc(100dvh - var(--btfw-top) - 8px); } }

/* Chat bars styled */
#chatwrap.btfw-chatwrap{ display:flex; flex-direction:column; width:100% !important; max-width:100% !important; height:100%; }
.btfw-chat-topbar,.btfw-chat-bottombar{ display:flex; align-items:center; justify-content:space-between; padding:10px 12px; border-radius: var(--btfw-radius); background: linear-gradient(180deg, var(--btfw-surface), var(--btfw-surface-2)); margin-bottom:8px; border:1px solid var(--btfw-border); box-shadow: var(--btfw-shadow); }
.btfw-chat-title{ font-weight:800; letter-spacing:.2px; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }
.btfw-chat-actions{ display:flex; gap:8px; }
.btfw-chatbtn.button{ border-radius:10px; border:1px solid var(--btfw-border); }
.btfw-chatbtn.button.is-dark{ background:rgba(0,0,0,.25); }

#messagebuffer.btfw-messagebuffer{ flex:1 1 auto; overflow:auto; width:100%; min-height:0; }

.btfw-controls-row{ margin-top:8px; width:100%; position: sticky; bottom: max(0px, env(safe-area-inset-bottom)); background: var(--btfw-bg-soft); border-top: 1px solid var(--btfw-border); padding-bottom: max(8px, env(safe-area-inset-bottom)); z-index: 1; }

/* User list overlay */
#userlist.btfw-userlist-overlay{ position:absolute; right:12px; top:64px; bottom:140px; width:300px; background:rgba(20,24,34,.97); border-radius:12px; overflow:auto; box-shadow: var(--btfw-shadow); display:none; z-index:50; color:#e7e7ea; }
#userlist.btfw-userlist-overlay.btfw-userlist-overlay--open{ display:block; }

/* Stack */
.btfw-stack { margin-top: 10px; }
.btfw-stack-header{ display:flex; align-items:center; justify-content:space-between; padding:8px 10px; margin-bottom:8px; border:1px solid var(--btfw-border); border-radius:var(--btfw-radius); background:linear-gradient(180deg, var(--btfw-surface), var(--btfw-surface-2)); color:var(--btfw-text); box-shadow: var(--btfw-shadow); }
.btfw-stack-title{ font-weight:800; }
.btfw-stack-list{ display:flex; flex-direction:column; gap:10px; }
.btfw-stack-item{ border:1px solid var(--btfw-border); border-radius:var(--btfw-radius); background:var(--btfw-bg-soft); box-shadow: var(--btfw-shadow); }
.btfw-stack-item__header{ display:flex; gap:10px; align-items:center; justify-content:space-between; padding:8px 10px; border-bottom:1px solid var(--btfw-border); }
.btfw-stack-arrows{ display:flex; gap:6px; }
.btfw-arrow{ border:1px solid var(--btfw-border); background:transparent; color:var(--btfw-text); border-radius:8px; padding:4px 8px; cursor:pointer; }
.btfw-arrow:hover{ background:var(--btfw-surface-2); }
.btfw-stack-item__body{ padding: 8px; }
.btfw-stack-footer{ margin-top:12px; border-top:1px dashed var(--btfw-border); padding-top:10px; opacity:.9; }
.btfw-footer{ color:var(--btfw-muted); }

/* Channels */
.btfw-channels .btfw-channels-bar{ display:flex; align-items:center; gap:8px; padding:8px; }
.btfw-ch-scroller{ overflow:auto; white-space:nowrap; display:flex; gap:8px; scroll-behavior:smooth; }
.btfw-ch{ display:inline-flex; align-items:center; gap:8px; padding:8px 12px; border-radius:10px; border:1px solid var(--btfw-border); background:linear-gradient(180deg, var(--btfw-surface), var(--btfw-surface-2)); color:var(--btfw-text); text-decoration:none; }
.btfw-ch:hover{ background: linear-gradient(180deg, var(--btfw-surface-2), var(--btfw-surface)); }
.btfw-ch-nav{ border:1px solid var(--btfw-border); background:transparent; color:var(--btfw-text); border-radius:10px; padding:6px 10px; }

/* Video overlay & PiP */
#videowrap{ position:relative; }
.btfw-video-overlay{ position:absolute; inset:0; pointer-events:none; }
.btfw-video-overlay .btfw-vo-right{ position:absolute; top:8px; right:8px; display:flex; gap:6px; pointer-events:auto; }
.btfw-vo-btn{ border:1px solid var(--btfw-border); border-radius:10px; background:rgba(0,0,0,.25); color:var(--btfw-text); }
#btfw-pip-dock{ position: sticky; top: calc(var(--btfw-top) + 6px); z-index: 3; }
#videowrap.btfw-pip{ width: 360px !important; max-width:100%; }
#videowrap.btfw-pip .embed-responsive{ border-radius: 12px; overflow:hidden; box-shadow: var(--btfw-shadow); }
@media (max-width: 900px){
  #videowrap.btfw-pip{ width: 100% !important; }
}

/* Neutralize bootstrap in left column */
#btfw-leftpad [class*="col-"], #btfw-leftpad .row, #btfw-leftpad .container, #btfw-leftpad .container-fluid{ width:100% !important; max-width:100% !important; float:none !important; }
#videowrap, #playlistrow, #playlistwrap, #queuecontainer, #queue, #plmeta{ width:100% !important; max-width:100% !important; float:none !important; display:block !important; }

/* Buttons accent */
.button.is-primary, .button.is-dark.is-active{ background: linear-gradient(180deg, var(--btfw-accent), var(--btfw-accent-2)); border:0; color:white; }
.button.is-dark{ background: rgba(255,255,255,.06); border:1px solid var(--btfw-border); color: var(--btfw-text); }
.button.is-dark:hover{ background: rgba(255,255,255,.12); }
